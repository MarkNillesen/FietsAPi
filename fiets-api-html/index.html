<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fietsen en Kleuren</title>
    <style>
        body { width: 60%; margin: auto; margin-top: 20px; }
        th, td { padding: 10px; text-align: left; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; }
    </style>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body onload="loadData()">
    <h1>Fietsen en Kleuren</h1>

    <!-- Sectie voor kleuren -->
    <h2>Kleuren</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Kleur</th>
            </tr>
        </thead>
        <tbody id="kleurTabel">
            <!-- Kleuren worden hier geladen -->
        </tbody>
    </table>

    <!-- Sectie voor fietsen -->
    <h2>Fietsen</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Merk</th>
                <th>Kleur</th>
            </tr>
        </thead>
        <tbody id="fietsTabel">
            <!-- Fietsen worden hier geladen -->
        </tbody>
    </table>

    <script>
        const apiUrl = 'http://localhost:8000/api';  // Update deze naar jouw API locatie
    
        // Functie om fietsen en kleuren op te halen
        function loadData() {
            loadKleuren();
            loadFietsen();
        }
    
        // Laad kleuren en toon ze in de tabel
        const loadKleuren = async () => {
            try {
                const response = await axios.get(`${apiUrl}/kleuren`);  // Let op het verwijderen van .php
                const kleuren = response.data;
                let kleurTabel = '';
                kleuren.forEach(kleur => {
                    kleurTabel += `<tr><td>${kleur.id}</td><td>${kleur.naam}</td></tr>`;
                });
                document.getElementById('kleurTabel').innerHTML = kleurTabel;
            } catch (error) {
                console.error('Er ging iets mis met het ophalen van kleuren:', error);
            }
        }
    
        // Laad fietsen en toon ze in de tabel
        const loadFietsen = async () => {
            try {
                const response = await axios.get(`${apiUrl}/fietsen`);  // Verwijder .php
                const fietsen = response.data;
                let fietsTabel = '';
                fietsen.forEach(fiets => {
                    fietsTabel += `<tr><td>${fiets.id}</td><td>${fiets.merk}</td><td>${typeof fiets.kleur === 'object' ? (fiets.kleur?.naam || 'Geen kleur') : fiets.kleur}</td></tr>`;
                });
                document.getElementById('fietsTabel').innerHTML = fietsTabel;
            } catch (error) {
                console.error('Er ging iets mis met het ophalen van fietsen:', error);
            }
        }
    </script>
</body>
</html>
